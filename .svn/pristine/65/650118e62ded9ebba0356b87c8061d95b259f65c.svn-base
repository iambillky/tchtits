<!--
File: templates/ipam/add_network.html
Purpose: Form to add new network blocks to IPAM
Created: 2025-01-14
Author: DCMS Team

Revision History:
- v1.0.0: Initial creation with network addition form
          Supports CIDR notation, BGP flags, datacenter assignment
-->

{% extends "base.html" %}

{% block title %}Add Network - IPAM{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">Add Network Block</h1>
    <p class="page-subtitle">Define a new network for IP address tracking</p>
</div>

<div class="card">
    <div class="card-body">
        <form method="POST" action="{{ url_for('ipam.add_network') }}">
            {{ form.hidden_tag() }}
            
            <!-- Network Address -->
            <div class="mb-3">
                {{ form.network.label(class="form-label") }}
                {{ form.network(class="form-control") }}
                {% if form.network.errors %}
                    <div class="text-danger">
                        {% for error in form.network.errors %}
                            <small>{{ error }}</small>
                        {% endfor %}
                    </div>
                {% endif %}
                <small class="form-text text-muted">Enter the network address (e.g., 208.76.80.0)</small>
            </div>
            
            <!-- CIDR Prefix -->
            <div class="mb-3">
                {{ form.cidr.label(class="form-label") }}
                {{ form.cidr(class="form-control") }}
                {% if form.cidr.errors %}
                    <div class="text-danger">
                        {% for error in form.cidr.errors %}
                            <small>{{ error }}</small>
                        {% endfor %}
                    </div>
                {% endif %}
                <small class="form-text text-muted">CIDR prefix length (e.g., 24 for /24)</small>
            </div>
            
            <!-- Data Center -->
            <div class="mb-3">
                {{ form.datacenter_id.label(class="form-label") }}
                {{ form.datacenter_id(class="form-select") }}
                {% if form.datacenter_id.errors %}
                    <div class="text-danger">
                        {% for error in form.datacenter_id.errors %}
                            <small>{{ error }}</small>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            
            <!-- Description -->
            <div class="mb-3">
                {{ form.description.label(class="form-label") }}
                {{ form.description(class="form-control") }}
                {% if form.description.errors %}
                    <div class="text-danger">
                        {% for error in form.description.errors %}
                            <small>{{ error }}</small>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            
            <!-- Checkboxes -->
            <div class="mb-3">
                <div class="form-check">
                    {{ form.bgp_advertised(class="form-check-input") }}
                    {{ form.bgp_advertised.label(class="form-check-label") }}
                </div>
                <small class="form-text text-muted">Check if this network is advertised via BGP</small>
            </div>
            
            <div class="mb-3">
                <div class="form-check">
                    {{ form.is_public(class="form-check-input") }}
                    {{ form.is_public.label(class="form-check-label") }}
                </div>
                <small class="form-text text-muted">Uncheck for private (RFC1918) networks</small>
            </div>
            
            <!-- Submit Buttons -->
            <div class="d-flex gap-2">
                {{ form.submit(class="btn btn-primary") }}
                <a href="{{ url_for('ipam.networks') }}" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    </div>
</div>

<div class="card mt-3">
    <div class="card-body">
        <h5 class="card-title">Network Examples</h5>
        <ul class="mb-0">
            <li><strong>Public:</strong> 208.76.80.0/24 - Main public IP block</li>
            <li><strong>Private:</strong> 10.10.4.0/22 - Internal network</li>
            <li><strong>Management:</strong> 10.0.0.0/24 - Switch/PDU management</li>
            <li><strong>Colocation:</strong> 66.51.159.0/24 - Customer IP space</li>
        </ul>
    </div>
</div>
{% endblock %}